---
layout: post
title: Omissão da TAG de fechamento do PHP
category: PHP
published: false
---


A um tempo atrás o dia se arrastou um tanto quanto divertido no twitter. Uma série de pessoas entraram na seguinte discussão:

"Utilizar a tag de fechamento do PHP (?>) é uma boa prática ou não?"

As respostas (pra minha supresa) foram diversas, mas basicamente duas:
* Sim, caso ela não seja necessária, não utilizar é uma boa prática.
* Não. Ela é opcional e portanto não precisa ser omitida.

h2. O problema

Eu tenho minha posição, mas antes de apresentá-la, vamos ao porquê da discussão. Ao omitir (não usar) a tag de fechamento do PHP, você faz com que o PHP trate os espaços e as quebras de linha como caracteres não significativos e nada acontece. Se você não omitir e fechar a tag no final do script, o que acontece é que tudo que vier fora dos <?php ... ?> é diretamente jogado para o navegador. Qual o problema?

O problema é que para enviar uma informação ao navegador, o Apache precisa antes enviar o cabeçalho HTTP; mas existem funções do PHP que usam esse cabeçalho, como exemplo o session_start(), a header(), etc ...

O PHP ignora automaticamente o caracter de quebra de linha logo depois de sua tag de fechamento, se esse caracter existir, mas se houver outro, ou um espaço, pum. Problema. 
Imagine se isso acontece no seu arquivo de configuração? Você fecha o PHP dele e logo depois vem alguém, ou você mesmo, e dá alguns enters ou algum espaço depois da tag de fechamento. O que acontece? Você muito provavelmente vai passar um bom tempo tentando descobrir onde está o problema que impede você de usar algumas funções que precisem moficar o cabeçalho do PHP.

Agora, voltando pra discussão do Twitter hoje. O @duodraco (Anderson Casimiro) disse que era uma boa prática omitir quando desse a tag de fechamento, o @galvao (Er Galvão) disse que não era necessário e que isso não era uma boa prática por não ser um senso comum; que fechar ou não era opcional, como estava escrito na documentação do php.

h2. De volta a discussão

Ora, o que é uma boa prática? É algo que te ajuda no dia a dia, que não fere ninguém e nada mas que te traz benefícios óbivios. Não existe um manual ou instituição (nem a ISO) que normalize as boas práticas pra desenvolvimento de software. Isso é um senso um tanto quanto comum, comum porque? Porque a conclusão para se chegar a ele deve ser óbvia a todos.

Concluindo: ambos estavam certos. Não é uma boa prática no sentido de que não é um conhecimento completamente difundido. Porém, omitir a tag do PHP quando o arquivo só for possuir código PHP (classes, etc ...) não traz prejuízo nenhum, pelo contrário.

Concluindo: evite utilizar a tag de fechamento do PHP quando não for necessário. Esqueça a discussão de boas práticas ou não e faça o que for melhor pra você: evite fechar a tag.